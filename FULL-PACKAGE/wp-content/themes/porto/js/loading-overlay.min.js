(function(i,t){"use strict";i=i||{};var o=['<div class="loading-overlay">','<div class="loader"></div>',"</div>"].join(""),s=function(i,t){return this.initialize(i,t)};s.prototype={options:{css:{}},initialize:function(i,t){this.$wrapper=i,this.setVars().setOptions(t).build().events(),this.$wrapper.data("loadingOverlay",this)},setVars:function(){return this.$overlay=this.$wrapper.find(".loading-overlay"),this},setOptions:function(i){return this.$overlay.get(0)||this.matchProperties(),this.options=t.extend(!0,{},this.options,i),this.loaderClass=this.getLoaderClass(this.options.css.backgroundColor),this},build:function(){return this.$overlay.closest(document.documentElement).get(0)||(this.$cachedOverlay?this.$overlay=this.$cachedOverlay.clone():(this.$overlay=t(o).clone(),this.options.css&&(this.$overlay.css(this.options.css),this.$overlay.find(".loader").addClass(this.loaderClass))),this.$wrapper.append(this.$overlay)),this.$cachedOverlay||(this.$cachedOverlay=this.$overlay.clone()),this},events:function(){var i=this;return this.options.startShowing&&i.show(),(this.$wrapper.is("body")||this.options.hideOnWindowLoad)&&t(window).on("load error",(function(){i.hide()})),this.options.listenOn&&t(this.options.listenOn).on("loading-overlay:show beforeSend.ic",(function(t){t.stopPropagation(),i.show()})).on("loading-overlay:hide complete.ic",(function(t){t.stopPropagation(),i.hide()})),this.$wrapper.on("loading-overlay:show beforeSend.ic",(function(t){t.stopPropagation(),i.show()})).on("loading-overlay:hide complete.ic",(function(t){t.stopPropagation(),i.hide()})),this},show:function(){this.build(),this.position=this.$wrapper.css("position").toLowerCase(),"relative"==this.position&&"absolute"==this.position&&"fixed"==this.position||this.$wrapper.css({position:"relative"}),this.$wrapper.addClass("loading-overlay-showing")},hide:function(){var i=this;this.$wrapper.removeClass("loading-overlay-showing"),setTimeout((function(){"relative"==this.position&&"absolute"==this.position&&"fixed"==this.position||i.$wrapper.css({position:""})}),500)},matchProperties:function(){var i,o,s;for(o=(s=["backgroundColor","borderRadius"]).length,i=0;i<o;i++){var e={};e[s[i]]=this.$wrapper.css(s[i]),t.extend(this.options.css,e)}},getLoaderClass:function(i){if(!i||"transparent"===i||"inherit"===i)return"black";var t,o,s,e;return(o=i).indexOf("#")>-1?s=o.replace("#",""):(e=o.match(/\d+/g),s=("0"+parseInt(e[0],10).toString(16)).slice(-2)+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)),3===s.length&&(s+=s),t=s,(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3>=128?"black":"white"}},t.extend(i,{LoadingOverlay:s}),t.fn.loadingOverlay=function(i){return this.each((function(){var o=t(this),e=o.data("loadingOverlay");if(e)return e;var n=i||o.data("loading-overlay-options")||{};return new s(o,n)}))},t("body.loading-overlay-showing, [data-loading-overlay]").loadingOverlay()}).apply(this,[window.theme,jQuery]);